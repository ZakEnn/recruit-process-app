<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"  xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="sid-38422fae-e03e-43a3-bef4-bd33b32041b2" targetNamespace="http://bpmn.io/bpmn" exporter="bpmn-js (https://demo.bpmn.io)" exporterVersion="8.0.1">
  <process id="recruit_Process" name="recruit process" isExecutable="true">
    <documentation>Hire an Applicant</documentation>
    <startEvent id="startEvent" name="start"></startEvent>
    <sequenceFlow id="flow2" sourceRef="startEvent" targetRef="storeResume" />
    <serviceTask id="storeResume" name="storeResume"  camunda:expression="${resumeService.storeResume(applicant.email, resume)}" >
      <documentation>Store CV</documentation>
    </serviceTask>
    <sequenceFlow id="flow3" sourceRef="storeResume" targetRef="reviewApplication" />
    <userTask id="reviewApplication" name="reviewApplication" camunda:candidateGroups="hr-managers" camunda:assignee="${applicant.recruiterMail}" >
    </userTask>
    <exclusiveGateway id="reviewdApplication"/>
    <sequenceFlow id="flow4_1" sourceRef="reviewApplication" targetRef="sendApproval" >
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${reviewCvOutcome == true}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="flow4_2" sourceRef="reviewApplication" targetRef="sendDecline" >
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${reviewCvOutcome == false}]]></conditionExpression>
    </sequenceFlow>
    <serviceTask id="sendDecline" name="sendRejection" camunda:expression="${notificationService.sendMessage(applicant.name, response.rejection)}">
      </serviceTask>
      <serviceTask id="sendApproval" name="sendApproval"  camunda:expression="${notificationService.sendMessage(applicant.name, response.approval)}">
      </serviceTask>
    </process>

  </definitions>