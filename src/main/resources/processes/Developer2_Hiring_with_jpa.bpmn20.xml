<?xml version='1.0' encoding='UTF-8'?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:activiti="http://activiti.org/bpmn" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" typeLanguage="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.w3.org/1999/XPath" targetNamespace="http://www.activiti.org/processdef" xmlns:modeler="http://activiti.com/modeler" modeler:version="1.0en" modeler:exportDateTime="20150216104339475" modeler:modelId="933057" modeler:modelVersion="3" modeler:modelLastUpdated="1424083415708">
  <signal id="cancelApplication" name="cancelApplication"/>
  <process id="hireProcessWithJpa2" name="Developer Hiring" isExecutable="true">
    <userTask id="sid-42BAE58A-8FFB-4B02-AAED-E0D8EA5A7E39" name="Telephone interview" activiti:candidateGroups="dev-managers">
      <documentation>Conduct a telephone interview with ${applicant.name}. Phone number = ${applicant.phoneNumber}</documentation>
    </userTask>
    <exclusiveGateway id="sid-47ECD3C6-CA48-40D8-B478-6C26A122FA28"/>
    <sequenceFlow id="sid-B468226B-DB2E-421E-B04B-5FF1622F3E78" sourceRef="sid-42BAE58A-8FFB-4B02-AAED-E0D8EA5A7E39" targetRef="sid-47ECD3C6-CA48-40D8-B478-6C26A122FA28"/>
    <endEvent id="sid-A4859521-98BA-44EA-A9B1-55445823CE0D"/>
    <sequenceFlow id="sid-D536B119-9F6C-45B6-B1B6-8142AE70208A" sourceRef="sid-59C993BD-38A0-4DC3-97BC-F58FD94E38A9" targetRef="sid-A4859521-98BA-44EA-A9B1-55445823CE0D"/>
    <serviceTask id="sid-59C993BD-38A0-4DC3-97BC-F58FD94E38A9" name="Send rejection email" activiti:type="mail">
      <extensionElements>
        <activiti:field name="to">
          <activiti:expression>${applicant.email}</activiti:expression>
        </activiti:field>
        <activiti:field name="subject">
          <activiti:string><![CDATA[Your application has been rejected]]></activiti:string>
        </activiti:field>
        <activiti:field name="html">
          <activiti:expression>Dear ${applicant.name},

We're sorry to inform you that your recent application has been rejected. We have stored your information in our data systems and will contact you if in the future a potential matching application is posted on our website.

Regards,
My Corp</activiti:expression>
        </activiti:field>
      </extensionElements>
    </serviceTask>
    <subProcess id="sid-304989D1-D3EC-4F89-A288-2238C7941973" name="subProcess">
      <startEvent id="sid-48CEC12C-2047-4B8B-94E9-371A379C3CF3"/>
      <parallelGateway id="sid-904B6A3F-4D05-408C-BF50-25194FBFE4CA"/>
      <userTask id="sid-C2137C46-166B-4F9B-92A1-97BF920FCD9E" name="Tech interview" activiti:candidateGroups="dev-management"/>
      <userTask id="sid-14429F68-4A79-47DC-A3F0-21804629FD88" name="Financial negotiation" activiti:candidateGroups="finance"/>
      <parallelGateway id="sid-E16BD1C2-F09E-4946-A65A-3D2FBF1FC62E"/>
      <endEvent id="sid-DB05DC5F-A576-4E77-803A-C41AB0694245"/>
      <sequenceFlow id="sid-6984E944-1910-459D-8527-CAE4D8D8AB72" sourceRef="sid-48CEC12C-2047-4B8B-94E9-371A379C3CF3" targetRef="sid-904B6A3F-4D05-408C-BF50-25194FBFE4CA"/>
      <sequenceFlow id="sid-246A0361-34E8-4E82-B9B4-732C78C6596A" sourceRef="sid-904B6A3F-4D05-408C-BF50-25194FBFE4CA" targetRef="sid-C2137C46-166B-4F9B-92A1-97BF920FCD9E"/>
      <sequenceFlow id="sid-C00D2164-EADB-4D9B-B681-DD23458FA985" sourceRef="sid-904B6A3F-4D05-408C-BF50-25194FBFE4CA" targetRef="sid-14429F68-4A79-47DC-A3F0-21804629FD88"/>
      <sequenceFlow id="sid-39F83022-C5C5-4255-946D-71FD6574D4A3" sourceRef="sid-C2137C46-166B-4F9B-92A1-97BF920FCD9E" targetRef="sid-E16BD1C2-F09E-4946-A65A-3D2FBF1FC62E"/>
      <sequenceFlow id="sid-77C4C52B-6069-45FD-9AF3-6C86D20FF754" sourceRef="sid-14429F68-4A79-47DC-A3F0-21804629FD88" targetRef="sid-E16BD1C2-F09E-4946-A65A-3D2FBF1FC62E"/>
      <sequenceFlow id="sid-9487131F-299B-4B07-9524-77477ACAFCC0" sourceRef="sid-E16BD1C2-F09E-4946-A65A-3D2FBF1FC62E" targetRef="sid-DB05DC5F-A576-4E77-803A-C41AB0694245"/>
    </subProcess>
    <sequenceFlow id="sid-2857CC85-AFAB-4DAB-9FBD-B7F41D396538" sourceRef="sid-BE9CDC49-2ED2-4FEF-A7DC-564EFA71A4DE" targetRef="sid-4A90B630-E902-41D9-854B-E75D06714074"/>
    <endEvent id="sid-4A90B630-E902-41D9-854B-E75D06714074"/>
    <serviceTask id="sid-9DFC483F-2C57-4378-AE25-30460BD3838F" name="Store resume" activiti:expression="${resumeService.storeResume()}"/>
    <sequenceFlow id="sid-366D79F8-23D7-4E3F-8F0F-3C29545C81FB" sourceRef="sid-9DFC483F-2C57-4378-AE25-30460BD3838F" targetRef="sid-42BAE58A-8FFB-4B02-AAED-E0D8EA5A7E39"/>
    <startEvent id="sid-E0DD2D8E-0672-4BE0-97A4-933DD8771EFF"/>
    <sequenceFlow id="sid-D4DD49AB-01E3-4A84-9B46-7CE0C414D71D" sourceRef="sid-E0DD2D8E-0672-4BE0-97A4-933DD8771EFF" targetRef="sid-9DFC483F-2C57-4378-AE25-30460BD3838F"/>
    <sequenceFlow id="sid-F967A26E-3C8E-45AD-B791-C473491DA988" sourceRef="sid-47ECD3C6-CA48-40D8-B478-6C26A122FA28" targetRef="sid-59C993BD-38A0-4DC3-97BC-F58FD94E38A9">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${telephoneInterviewOutcome == false}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-F659050F-BF12-43FD-BE60-F0E235B1A32B" sourceRef="sid-47ECD3C6-CA48-40D8-B478-6C26A122FA28" targetRef="sid-304989D1-D3EC-4F89-A288-2238C7941973">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${telephoneInterviewOutcome == true}]]></conditionExpression>
    </sequenceFlow>
    <boundaryEvent id="sid-BE9CDC49-2ED2-4FEF-A7DC-564EFA71A4DE" name="applicant cancels" attachedToRef="sid-304989D1-D3EC-4F89-A288-2238C7941973" cancelActivity="true">
      <signalEventDefinition signalRef="cancelApplication"/>
    </boundaryEvent>
    <exclusiveGateway id="sid-3D63E564-D35A-42E3-A81E-6D7DF325D118" default="sid-014FAF0B-EBA1-411B-AF4F-CC7EA848FF89"/>
    <sequenceFlow id="sid-73AC3A3C-D128-4664-BC6C-7AF08FEDC8CA" sourceRef="sid-304989D1-D3EC-4F89-A288-2238C7941973" targetRef="sid-3D63E564-D35A-42E3-A81E-6D7DF325D118"/>
    <endEvent id="sid-088F6DA0-EA68-4A29-9BC3-76B9D5C5E2E0" name="rejected"/>
    <serviceTask id="sid-F2ADA953-6FCF-42FA-B59E-45DAC6EACFA7" name="Send welcome mail" activiti:type="mail">
      <extensionElements>
        <activiti:field name="to">
          <activiti:expression>${applicant.email}</activiti:expression>
        </activiti:field>
        <activiti:field name="from">
          <activiti:expression>test@activiti.org</activiti:expression>
        </activiti:field>
        <activiti:field name="subject">
          <activiti:string><![CDATA[Your application has been accepted!]]></activiti:string>
        </activiti:field>
        <activiti:field name="html">
          <activiti:expression>Dear ${applicant.name},

We're happy to inform you that your recent application has been accepted.  We will contact you soon for more information.

Regards,
My Corp</activiti:expression>
        </activiti:field>
      </extensionElements>
    </serviceTask>
    <endEvent id="sid-76F28F61-0B2A-41BA-8A71-5E4C9C7828E4" name="accepted"/>
    <sequenceFlow id="sid-B950EB17-8AE6-4F23-8888-FDCEE4797A21" sourceRef="sid-F2ADA953-6FCF-42FA-B59E-45DAC6EACFA7" targetRef="sid-76F28F61-0B2A-41BA-8A71-5E4C9C7828E4"/>
    <sequenceFlow id="sid-014FAF0B-EBA1-411B-AF4F-CC7EA848FF89" sourceRef="sid-3D63E564-D35A-42E3-A81E-6D7DF325D118" targetRef="sid-088F6DA0-EA68-4A29-9BC3-76B9D5C5E2E0"/>
    <sequenceFlow id="sid-59B08F72-9D7C-4CD5-A850-14E10328FD7B" sourceRef="sid-3D63E564-D35A-42E3-A81E-6D7DF325D118" targetRef="sid-F2ADA953-6FCF-42FA-B59E-45DAC6EACFA7">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${techOk && financialOk}]]></conditionExpression>
    </sequenceFlow>
  </process>

</definitions>